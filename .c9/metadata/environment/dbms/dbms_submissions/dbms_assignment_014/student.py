{"filter":false,"title":"student.py","tooltip":"dbms/dbms_submissions/dbms_assignment_014/student.py","undoManager":{"mark":100,"position":100,"stack":[[{"start":{"row":136,"column":16},"end":{"row":136,"column":20},"action":"remove","lines":["    "],"id":1241}],[{"start":{"row":137,"column":20},"end":{"row":137,"column":24},"action":"remove","lines":["    "],"id":1242}],[{"start":{"row":138,"column":20},"end":{"row":138,"column":24},"action":"remove","lines":["    "],"id":1243}],[{"start":{"row":139,"column":24},"end":{"row":139,"column":28},"action":"remove","lines":["    "],"id":1244}],[{"start":{"row":140,"column":24},"end":{"row":140,"column":28},"action":"remove","lines":["    "],"id":1245}],[{"start":{"row":142,"column":24},"end":{"row":142,"column":28},"action":"remove","lines":["    "],"id":1246}],[{"start":{"row":145,"column":16},"end":{"row":145,"column":20},"action":"remove","lines":["    "],"id":1247}],[{"start":{"row":147,"column":16},"end":{"row":147,"column":20},"action":"remove","lines":["    "],"id":1248}],[{"start":{"row":187,"column":0},"end":{"row":187,"column":2},"action":"insert","lines":["''"],"id":1249}],[{"start":{"row":187,"column":2},"end":{"row":187,"column":3},"action":"insert","lines":["'"],"id":1250}],[{"start":{"row":193,"column":12},"end":{"row":193,"column":13},"action":"insert","lines":["'"],"id":1251},{"start":{"row":193,"column":13},"end":{"row":193,"column":14},"action":"insert","lines":["'"]},{"start":{"row":193,"column":14},"end":{"row":193,"column":15},"action":"insert","lines":["'"]}],[{"start":{"row":131,"column":12},"end":{"row":131,"column":14},"action":"insert","lines":["''"],"id":1252}],[{"start":{"row":131,"column":14},"end":{"row":131,"column":15},"action":"insert","lines":["'"],"id":1253}],[{"start":{"row":147,"column":34},"end":{"row":147,"column":35},"action":"insert","lines":["'"],"id":1254},{"start":{"row":147,"column":35},"end":{"row":147,"column":36},"action":"insert","lines":["'"]},{"start":{"row":147,"column":36},"end":{"row":147,"column":37},"action":"insert","lines":["'"]}],[{"start":{"row":145,"column":35},"end":{"row":145,"column":36},"action":"remove","lines":["'"],"id":1255},{"start":{"row":145,"column":34},"end":{"row":145,"column":35},"action":"remove","lines":["'"]},{"start":{"row":145,"column":33},"end":{"row":145,"column":34},"action":"remove","lines":["'"]}],[{"start":{"row":145,"column":70},"end":{"row":145,"column":71},"action":"remove","lines":["'"],"id":1256},{"start":{"row":145,"column":69},"end":{"row":145,"column":70},"action":"remove","lines":["'"]},{"start":{"row":145,"column":68},"end":{"row":145,"column":69},"action":"remove","lines":["'"]}],[{"start":{"row":131,"column":14},"end":{"row":131,"column":15},"action":"remove","lines":["'"],"id":1257},{"start":{"row":131,"column":13},"end":{"row":131,"column":14},"action":"remove","lines":["'"]},{"start":{"row":131,"column":12},"end":{"row":131,"column":13},"action":"remove","lines":["'"]}],[{"start":{"row":132,"column":33},"end":{"row":132,"column":34},"action":"remove","lines":[")"],"id":1258},{"start":{"row":132,"column":32},"end":{"row":132,"column":33},"action":"remove","lines":["1"]},{"start":{"row":132,"column":31},"end":{"row":132,"column":32},"action":"remove","lines":[" "]},{"start":{"row":132,"column":30},"end":{"row":132,"column":31},"action":"remove","lines":[">"]},{"start":{"row":132,"column":29},"end":{"row":132,"column":30},"action":"remove","lines":[" "]},{"start":{"row":132,"column":28},"end":{"row":132,"column":29},"action":"remove","lines":[")"]},{"start":{"row":132,"column":27},"end":{"row":132,"column":28},"action":"remove","lines":["i"]},{"start":{"row":132,"column":26},"end":{"row":132,"column":27},"action":"remove","lines":["l"]},{"start":{"row":132,"column":25},"end":{"row":132,"column":26},"action":"remove","lines":["_"]},{"start":{"row":132,"column":24},"end":{"row":132,"column":25},"action":"remove","lines":["s"]},{"start":{"row":132,"column":23},"end":{"row":132,"column":24},"action":"remove","lines":["y"]},{"start":{"row":132,"column":22},"end":{"row":132,"column":23},"action":"remove","lines":["e"]},{"start":{"row":132,"column":21},"end":{"row":132,"column":22},"action":"remove","lines":["k"]},{"start":{"row":132,"column":20},"end":{"row":132,"column":21},"action":"remove","lines":["("]}],[{"start":{"row":132,"column":19},"end":{"row":132,"column":20},"action":"remove","lines":["n"],"id":1259},{"start":{"row":132,"column":18},"end":{"row":132,"column":19},"action":"remove","lines":["e"]},{"start":{"row":132,"column":17},"end":{"row":132,"column":18},"action":"remove","lines":["l"]},{"start":{"row":132,"column":16},"end":{"row":132,"column":17},"action":"remove","lines":["("]},{"start":{"row":132,"column":15},"end":{"row":132,"column":16},"action":"remove","lines":["f"]},{"start":{"row":132,"column":14},"end":{"row":132,"column":15},"action":"remove","lines":["i"]}],[{"start":{"row":132,"column":14},"end":{"row":132,"column":15},"action":"insert","lines":["s"],"id":1260},{"start":{"row":132,"column":15},"end":{"row":132,"column":16},"action":"insert","lines":["e"]}],[{"start":{"row":132,"column":0},"end":{"row":132,"column":4},"action":"insert","lines":["    "],"id":1261},{"start":{"row":133,"column":0},"end":{"row":133,"column":4},"action":"insert","lines":["    "]},{"start":{"row":134,"column":0},"end":{"row":134,"column":4},"action":"insert","lines":["    "]},{"start":{"row":135,"column":0},"end":{"row":135,"column":4},"action":"insert","lines":["    "]},{"start":{"row":136,"column":0},"end":{"row":136,"column":4},"action":"insert","lines":["    "]},{"start":{"row":137,"column":0},"end":{"row":137,"column":4},"action":"insert","lines":["    "]},{"start":{"row":138,"column":0},"end":{"row":138,"column":4},"action":"insert","lines":["    "]},{"start":{"row":139,"column":0},"end":{"row":139,"column":4},"action":"insert","lines":["    "]},{"start":{"row":140,"column":0},"end":{"row":140,"column":4},"action":"insert","lines":["    "]},{"start":{"row":141,"column":0},"end":{"row":141,"column":4},"action":"insert","lines":["    "]},{"start":{"row":142,"column":0},"end":{"row":142,"column":4},"action":"insert","lines":["    "]},{"start":{"row":143,"column":0},"end":{"row":143,"column":4},"action":"insert","lines":["    "]},{"start":{"row":144,"column":0},"end":{"row":144,"column":4},"action":"insert","lines":["    "]},{"start":{"row":145,"column":0},"end":{"row":145,"column":4},"action":"insert","lines":["    "]},{"start":{"row":146,"column":0},"end":{"row":146,"column":4},"action":"insert","lines":["    "]},{"start":{"row":147,"column":0},"end":{"row":147,"column":4},"action":"insert","lines":["    "]},{"start":{"row":148,"column":0},"end":{"row":148,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":145,"column":37},"end":{"row":145,"column":38},"action":"insert","lines":["'"],"id":1262},{"start":{"row":145,"column":38},"end":{"row":145,"column":39},"action":"insert","lines":["'"]},{"start":{"row":145,"column":39},"end":{"row":145,"column":40},"action":"insert","lines":["'"]}],[{"start":{"row":145,"column":75},"end":{"row":145,"column":76},"action":"insert","lines":["'"],"id":1263},{"start":{"row":145,"column":76},"end":{"row":145,"column":77},"action":"insert","lines":["'"]},{"start":{"row":145,"column":77},"end":{"row":145,"column":78},"action":"insert","lines":["'"]}],[{"start":{"row":147,"column":40},"end":{"row":147,"column":41},"action":"remove","lines":["'"],"id":1264},{"start":{"row":147,"column":39},"end":{"row":147,"column":40},"action":"remove","lines":["'"]},{"start":{"row":147,"column":38},"end":{"row":147,"column":39},"action":"remove","lines":["'"]}],[{"start":{"row":187,"column":2},"end":{"row":187,"column":3},"action":"remove","lines":["'"],"id":1265},{"start":{"row":187,"column":1},"end":{"row":187,"column":2},"action":"remove","lines":["'"]},{"start":{"row":187,"column":0},"end":{"row":187,"column":1},"action":"remove","lines":["'"]}],[{"start":{"row":193,"column":14},"end":{"row":193,"column":15},"action":"remove","lines":["'"],"id":1266},{"start":{"row":193,"column":13},"end":{"row":193,"column":14},"action":"remove","lines":["'"]},{"start":{"row":193,"column":12},"end":{"row":193,"column":13},"action":"remove","lines":["'"]}],[{"start":{"row":145,"column":16},"end":{"row":145,"column":20},"action":"remove","lines":["    "],"id":1267}],[{"start":{"row":147,"column":16},"end":{"row":147,"column":20},"action":"remove","lines":["    "],"id":1268}],[{"start":{"row":147,"column":34},"end":{"row":148,"column":0},"action":"insert","lines":["",""],"id":1269},{"start":{"row":148,"column":0},"end":{"row":148,"column":16},"action":"insert","lines":["                "]},{"start":{"row":148,"column":16},"end":{"row":149,"column":0},"action":"insert","lines":["",""]},{"start":{"row":149,"column":0},"end":{"row":149,"column":16},"action":"insert","lines":["                "]},{"start":{"row":149,"column":16},"end":{"row":150,"column":0},"action":"insert","lines":["",""]},{"start":{"row":150,"column":0},"end":{"row":150,"column":16},"action":"insert","lines":["                "]}],[{"start":{"row":150,"column":12},"end":{"row":150,"column":16},"action":"remove","lines":["    "],"id":1270}],[{"start":{"row":150,"column":12},"end":{"row":151,"column":0},"action":"insert","lines":["",""],"id":1271},{"start":{"row":151,"column":0},"end":{"row":151,"column":12},"action":"insert","lines":["            "]}],[{"start":{"row":151,"column":12},"end":{"row":167,"column":16},"action":"insert","lines":["else :","                        ","                    symboles = {'lt':'<','gt':'>','lte':'<=','gte':'>=','eq':'='}","                    joining = []","                    for i in range(len(keys_li)):","                        k = keys_li[i].split('__')","                        if k[1] in ['lt','gt','lte','gte'] :","                            sql = '{} {} {}'.format(k[0],symboles[k[1]],mc[keys_li[i]])","                            joining.append(sql)","                                        ","                            l = (' and '.join(joining))","                                        ","                                        ","                data = read_data('''select {}({}) from student where {}'''.format(attr,field,l))","                        #print(data[0][0])","                return(data[0][0])","                "],"id":1272}],[{"start":{"row":153,"column":16},"end":{"row":153,"column":20},"action":"remove","lines":["    "],"id":1273}],[{"start":{"row":154,"column":16},"end":{"row":154,"column":20},"action":"remove","lines":["    "],"id":1274}],[{"start":{"row":155,"column":16},"end":{"row":155,"column":20},"action":"remove","lines":["    "],"id":1275}],[{"start":{"row":156,"column":20},"end":{"row":156,"column":24},"action":"remove","lines":["    "],"id":1276}],[{"start":{"row":157,"column":20},"end":{"row":157,"column":24},"action":"remove","lines":["    "],"id":1277}],[{"start":{"row":158,"column":24},"end":{"row":158,"column":28},"action":"remove","lines":["    "],"id":1278}],[{"start":{"row":159,"column":24},"end":{"row":159,"column":28},"action":"remove","lines":["    "],"id":1279}],[{"start":{"row":161,"column":24},"end":{"row":161,"column":28},"action":"remove","lines":["    "],"id":1280}],[{"start":{"row":207,"column":0},"end":{"row":207,"column":2},"action":"insert","lines":["''"],"id":1281}],[{"start":{"row":207,"column":2},"end":{"row":207,"column":3},"action":"insert","lines":["'"],"id":1282}],[{"start":{"row":213,"column":12},"end":{"row":213,"column":13},"action":"insert","lines":["'"],"id":1283},{"start":{"row":213,"column":13},"end":{"row":213,"column":14},"action":"insert","lines":["'"]},{"start":{"row":213,"column":14},"end":{"row":213,"column":15},"action":"insert","lines":["'"]}],[{"start":{"row":145,"column":16},"end":{"row":145,"column":20},"action":"insert","lines":["    "],"id":1284}],[{"start":{"row":147,"column":16},"end":{"row":147,"column":20},"action":"insert","lines":["    "],"id":1285}],[{"start":{"row":61,"column":55},"end":{"row":61,"column":56},"action":"remove","lines":["*"],"id":1286}],[{"start":{"row":61,"column":55},"end":{"row":61,"column":56},"action":"insert","lines":["{"],"id":1287},{"start":{"row":61,"column":56},"end":{"row":61,"column":57},"action":"insert","lines":["}"]}],[{"start":{"row":61,"column":57},"end":{"row":61,"column":58},"action":"insert","lines":["("],"id":1288},{"start":{"row":61,"column":58},"end":{"row":61,"column":59},"action":"insert","lines":["{"]},{"start":{"row":61,"column":59},"end":{"row":61,"column":60},"action":"insert","lines":["}"]},{"start":{"row":61,"column":60},"end":{"row":61,"column":61},"action":"insert","lines":[")"]}],[{"start":{"row":61,"column":99},"end":{"row":61,"column":100},"action":"insert","lines":["a"],"id":1289},{"start":{"row":61,"column":100},"end":{"row":61,"column":101},"action":"insert","lines":["t"]},{"start":{"row":61,"column":101},"end":{"row":61,"column":102},"action":"insert","lines":["t"]},{"start":{"row":61,"column":102},"end":{"row":61,"column":103},"action":"insert","lines":["r"]},{"start":{"row":61,"column":103},"end":{"row":61,"column":104},"action":"insert","lines":[","]}],[{"start":{"row":61,"column":104},"end":{"row":61,"column":105},"action":"insert","lines":["f"],"id":1290},{"start":{"row":61,"column":105},"end":{"row":61,"column":106},"action":"insert","lines":["i"]},{"start":{"row":61,"column":106},"end":{"row":61,"column":107},"action":"insert","lines":["e"]},{"start":{"row":61,"column":107},"end":{"row":61,"column":108},"action":"insert","lines":["l"]},{"start":{"row":61,"column":108},"end":{"row":61,"column":109},"action":"insert","lines":["d"]},{"start":{"row":61,"column":109},"end":{"row":61,"column":110},"action":"insert","lines":[","]}],[{"start":{"row":64,"column":102},"end":{"row":64,"column":103},"action":"insert","lines":["a"],"id":1291},{"start":{"row":64,"column":103},"end":{"row":64,"column":104},"action":"insert","lines":["t"]},{"start":{"row":64,"column":104},"end":{"row":64,"column":105},"action":"insert","lines":["t"]},{"start":{"row":64,"column":105},"end":{"row":64,"column":106},"action":"insert","lines":["r"]},{"start":{"row":64,"column":106},"end":{"row":64,"column":107},"action":"insert","lines":[","]},{"start":{"row":64,"column":107},"end":{"row":64,"column":108},"action":"insert","lines":["f"]},{"start":{"row":64,"column":108},"end":{"row":64,"column":109},"action":"insert","lines":["i"]},{"start":{"row":64,"column":109},"end":{"row":64,"column":110},"action":"insert","lines":["e"]}],[{"start":{"row":64,"column":110},"end":{"row":64,"column":111},"action":"insert","lines":["l"],"id":1292},{"start":{"row":64,"column":111},"end":{"row":64,"column":112},"action":"insert","lines":["d"]},{"start":{"row":64,"column":112},"end":{"row":64,"column":113},"action":"insert","lines":[","]}],[{"start":{"row":64,"column":55},"end":{"row":64,"column":56},"action":"remove","lines":["*"],"id":1293}],[{"start":{"row":64,"column":55},"end":{"row":64,"column":56},"action":"insert","lines":["{"],"id":1294},{"start":{"row":64,"column":56},"end":{"row":64,"column":57},"action":"insert","lines":["}"]},{"start":{"row":64,"column":57},"end":{"row":64,"column":58},"action":"insert","lines":["("]},{"start":{"row":64,"column":58},"end":{"row":64,"column":59},"action":"insert","lines":["{"]},{"start":{"row":64,"column":59},"end":{"row":64,"column":60},"action":"insert","lines":["}"]}],[{"start":{"row":64,"column":60},"end":{"row":64,"column":61},"action":"insert","lines":[")"],"id":1295}],[{"start":{"row":213,"column":15},"end":{"row":214,"column":0},"action":"insert","lines":["",""],"id":1296},{"start":{"row":214,"column":0},"end":{"row":215,"column":0},"action":"insert","lines":["",""]},{"start":{"row":215,"column":0},"end":{"row":216,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":216,"column":0},"end":{"row":218,"column":2},"action":"insert","lines":["count = Student.count()",">>> count","10"],"id":1297}],[{"start":{"row":217,"column":3},"end":{"row":217,"column":4},"action":"remove","lines":[" "],"id":1298},{"start":{"row":217,"column":2},"end":{"row":217,"column":3},"action":"remove","lines":[">"]},{"start":{"row":217,"column":1},"end":{"row":217,"column":2},"action":"remove","lines":[">"]},{"start":{"row":217,"column":0},"end":{"row":217,"column":1},"action":"remove","lines":[">"]}],[{"start":{"row":217,"column":0},"end":{"row":217,"column":1},"action":"insert","lines":["p"],"id":1299},{"start":{"row":217,"column":1},"end":{"row":217,"column":2},"action":"insert","lines":["r"]},{"start":{"row":217,"column":2},"end":{"row":217,"column":3},"action":"insert","lines":["i"]},{"start":{"row":217,"column":3},"end":{"row":217,"column":4},"action":"insert","lines":["n"]},{"start":{"row":217,"column":4},"end":{"row":217,"column":5},"action":"insert","lines":["t"]},{"start":{"row":217,"column":5},"end":{"row":217,"column":6},"action":"insert","lines":["("]}],[{"start":{"row":217,"column":11},"end":{"row":217,"column":12},"action":"insert","lines":[")"],"id":1300}],[{"start":{"row":218,"column":1},"end":{"row":218,"column":2},"action":"remove","lines":["0"],"id":1301},{"start":{"row":218,"column":0},"end":{"row":218,"column":1},"action":"remove","lines":["1"]}],[{"start":{"row":216,"column":20},"end":{"row":216,"column":21},"action":"remove","lines":["t"],"id":1302},{"start":{"row":216,"column":19},"end":{"row":216,"column":20},"action":"remove","lines":["n"]},{"start":{"row":216,"column":18},"end":{"row":216,"column":19},"action":"remove","lines":["u"]},{"start":{"row":216,"column":17},"end":{"row":216,"column":18},"action":"remove","lines":["o"]},{"start":{"row":216,"column":16},"end":{"row":216,"column":17},"action":"remove","lines":["c"]}],[{"start":{"row":216,"column":16},"end":{"row":216,"column":17},"action":"insert","lines":["m"],"id":1303},{"start":{"row":216,"column":17},"end":{"row":216,"column":18},"action":"insert","lines":["i"]},{"start":{"row":216,"column":18},"end":{"row":216,"column":19},"action":"insert","lines":["n"]}],[{"start":{"row":216,"column":20},"end":{"row":216,"column":22},"action":"insert","lines":["''"],"id":1304}],[{"start":{"row":216,"column":21},"end":{"row":216,"column":22},"action":"insert","lines":["s"],"id":1305},{"start":{"row":216,"column":22},"end":{"row":216,"column":23},"action":"insert","lines":["t"]},{"start":{"row":216,"column":23},"end":{"row":216,"column":24},"action":"insert","lines":["u"]},{"start":{"row":216,"column":24},"end":{"row":216,"column":25},"action":"insert","lines":["d"]},{"start":{"row":216,"column":25},"end":{"row":216,"column":26},"action":"insert","lines":["e"]},{"start":{"row":216,"column":26},"end":{"row":216,"column":27},"action":"insert","lines":["n"]},{"start":{"row":216,"column":27},"end":{"row":216,"column":28},"action":"insert","lines":["t"]},{"start":{"row":216,"column":28},"end":{"row":216,"column":29},"action":"insert","lines":["_"]},{"start":{"row":216,"column":29},"end":{"row":216,"column":30},"action":"insert","lines":["i"]}],[{"start":{"row":216,"column":30},"end":{"row":216,"column":31},"action":"insert","lines":["d"],"id":1306}],[{"start":{"row":176,"column":21},"end":{"row":176,"column":22},"action":"insert","lines":["="],"id":1307}],[{"start":{"row":176,"column":22},"end":{"row":176,"column":24},"action":"insert","lines":["\"\""],"id":1308}],[{"start":{"row":176,"column":23},"end":{"row":176,"column":24},"action":"remove","lines":["\""],"id":1309},{"start":{"row":176,"column":22},"end":{"row":176,"column":23},"action":"remove","lines":["\""]},{"start":{"row":176,"column":21},"end":{"row":176,"column":22},"action":"remove","lines":["="]}],[{"start":{"row":180,"column":23},"end":{"row":180,"column":24},"action":"insert","lines":["="],"id":1310}],[{"start":{"row":180,"column":24},"end":{"row":180,"column":26},"action":"insert","lines":["\"\""],"id":1311}],[{"start":{"row":216,"column":31},"end":{"row":216,"column":32},"action":"remove","lines":["'"],"id":1312},{"start":{"row":216,"column":30},"end":{"row":216,"column":31},"action":"remove","lines":["d"]},{"start":{"row":216,"column":29},"end":{"row":216,"column":30},"action":"remove","lines":["i"]},{"start":{"row":216,"column":28},"end":{"row":216,"column":29},"action":"remove","lines":["_"]},{"start":{"row":216,"column":27},"end":{"row":216,"column":28},"action":"remove","lines":["t"]},{"start":{"row":216,"column":26},"end":{"row":216,"column":27},"action":"remove","lines":["n"]},{"start":{"row":216,"column":25},"end":{"row":216,"column":26},"action":"remove","lines":["e"]},{"start":{"row":216,"column":24},"end":{"row":216,"column":25},"action":"remove","lines":["d"]},{"start":{"row":216,"column":23},"end":{"row":216,"column":24},"action":"remove","lines":["u"]},{"start":{"row":216,"column":22},"end":{"row":216,"column":23},"action":"remove","lines":["t"]},{"start":{"row":216,"column":21},"end":{"row":216,"column":22},"action":"remove","lines":["s"]}],[{"start":{"row":216,"column":20},"end":{"row":216,"column":21},"action":"remove","lines":["'"],"id":1313}],[{"start":{"row":216,"column":18},"end":{"row":216,"column":19},"action":"remove","lines":["n"],"id":1314},{"start":{"row":216,"column":17},"end":{"row":216,"column":18},"action":"remove","lines":["i"]},{"start":{"row":216,"column":16},"end":{"row":216,"column":17},"action":"remove","lines":["m"]}],[{"start":{"row":216,"column":16},"end":{"row":216,"column":17},"action":"insert","lines":["c"],"id":1315},{"start":{"row":216,"column":17},"end":{"row":216,"column":18},"action":"insert","lines":["o"]},{"start":{"row":216,"column":18},"end":{"row":216,"column":19},"action":"insert","lines":["u"]},{"start":{"row":216,"column":19},"end":{"row":216,"column":20},"action":"insert","lines":["n"]},{"start":{"row":216,"column":20},"end":{"row":216,"column":21},"action":"insert","lines":["t"]}],[{"start":{"row":0,"column":0},"end":{"row":218,"column":0},"action":"remove","lines":["def write_data(sql_query):","\timport sqlite3","\tconnection = sqlite3.connect(\"students.sqlite3\")","\tcrsr = connection.cursor() ","\tcrsr.execute(\"PRAGMA foreign_keys=on;\") ","\tcrsr.execute(sql_query) ","\tconnection.commit() ","\tconnection.close()","","def read_data(sql_query):","\timport sqlite3","\tconnection = sqlite3.connect(\"students.sqlite3\")","\tcrsr = connection.cursor() ","\tcrsr.execute(sql_query) ","\tans= crsr.fetchall()  ","\tconnection.close() ","\treturn ans","","","class InvalidField(Exception):","    pass","","","class Student:","    def __init__(self, name, age, score):","        self.name = name","        self.student_id = None","        self.age = age","        self.score = score","","    @classmethod","    def aggregation(cls,attr = None,field = \"\",**kwargs):","           ","        list = ['name','age','score','student_id','']","        if field not in list:","            raise InvalidField","        ","        if(len(kwargs) == 0):","            if field in ['age','score','student_id','name']:","                data = read_data('''select {}({}) from student'''.format(attr,field))","                return data[0][0]","                ","            else :","                raise InvalidField","                ","        else :","            keys_li = []","            mc = kwargs","            for k,v in kwargs.items():","                keys_li.append(k)","                ","                ","            if(len(keys_li) == 1):","                ","                for k,v in kwargs.items():","                    key = (k.split('__'))","                    value = v","                    print(key,value)","                    ","                    if len(key) == 1:","                        if key[0] in ['student_id','age','score']:","                            data = read_data('''select {}({}) from Student where {} = {}'''.format(attr,field,key[0],v))","                        ","                        elif key[0] == 'name':","                            data = read_data('''select {}({}) from Student where {} like '%{}%' '''.format(attr,field,key[0],v))","                    ","                        else : ","                            raise InvalidField","                    ","                    elif len(key) >= 1:","                 ","                        if field in ['age','score','student_id'] :  ","                            if key[1] == 'lt':","                                if key[0] in ['age','score','student_id']:","                                    data = read_data('''select {}({}) from Student where {} < {}'''.format(attr,field,key[0],v))","                                ","                                else : ","                                    raise InvalidField","                                            ","                                        ","                            elif key[1] == 'gt':","                                if key[0] in ['age','score','student_id']:","                                    data = read_data('''select {}({}) from Student where {} > {}'''.format(attr,field,key[0],v))","        ","                                else :","                                    raise InvalidField","                                                    ","                            elif key[1] == 'lte':","                                if key[0] in ['age','score','student_id']:","                                    data = read_data('''select {}({}) from Student where {} <= {}'''.format(attr,field,key[0],v))","                                    ","                                else :","                                    raise InvalidField","                                                    ","                            elif key[1] == 'gte':","                                if key[0] in ['age','score','student_id']:","                                    data = read_data('''select {}({}) from Student where {} >= {}'''.format(attr,field,key[0],v))","                                ","                                else :","                                    raise InvalidField","                                        ","                            elif key[1] == 'in':","                                if key[0] in ['name','age','score','student_id']:","                                    data = read_data('''select {}({}) from Student where {} in {}'''.format(attr,field,key[0],tuple(v)))","                                    ","                                else :","                                    raise InvalidField","                                ","                            elif key[1] == 'neq':","                                if key[0] in ['age','score','student_id']:","                                    data = read_data('''select {}({}) from Student where {} <> {}'''.format(attr,field,key[0],v))","                                    ","                                        ","                                elif key[0] == 'name':","                                    data = read_data('''select {}({}) from Student where {} <> '{}' '''.format(attr,field,key[0],v))","                                    ","                                    ","                                else :","                                    raise InvalidField","                                ","                                        ","                            elif key[1] == 'contains' :","                                ","                                if key[0] == 'name':","                                    data = read_data('''select {}({}) from Student where {} like '%{}%' '''.format(attr,field,key[0],v))","                                ","                                else :","                                    raise InvalidField","                            ","                            return data[0][0]            ","                                    ","                                ","                else :","                        ","                    symboles = {'lt':'<','gt':'>','lte':'<=','gte':'>=','eq':'='}","                    joining = []","                    for i in range(len(keys_li)):","                        k = keys_li[i].split('__')","                        if k[1] in ['lt','gt','lte','gte'] :","                            sql = '{} {} {}'.format(k[0],symboles[k[1]],mc[keys_li[i]])","                            joining.append(sql)","                                        ","                            l = (' and '.join(joining))","                                        ","                                        ","                    data = read_data('''select {}({}) from student where {}'''.format(attr,field,l))","                        #print(data[0][0])","                    return(data[0][0])","                ","                ","            ","            else :","                        ","                symboles = {'lt':'<','gt':'>','lte':'<=','gte':'>=','eq':'='}","                joining = []","                for i in range(len(keys_li)):","                    k = keys_li[i].split('__')","                    if k[1] in ['lt','gt','lte','gte'] :","                        sql = '{} {} {}'.format(k[0],symboles[k[1]],mc[keys_li[i]])","                        joining.append(sql)","                                        ","                        l = (' and '.join(joining))","                                        ","                                        ","                data = read_data('''select {}({}) from student where {}'''.format(attr,field,l))","                        #print(data[0][0])","                return(data[0][0])","                ","                                        ","                        ","    @classmethod","    def avg(cls,field,**kwargs):","        return cls.aggregation('AVG',field,**kwargs)","                                ","                                ","    @classmethod","    def sum(cls,field,**kwargs):","        return cls.aggregation('SUM',field,**kwargs)","    ","    @classmethod","    def count(cls,field=\"\",**kwargs):","        return cls.aggregation('COUNT',field,**kwargs)","    ","    @classmethod","    def min(cls,field,**kwargs):","        return cls.aggregation('MIN',field,**kwargs)","    ","    @classmethod","    def max(cls,field,**kwargs):","        return cls.aggregation('MAX',field,**kwargs)"," ","        ","'''      ","avg_age = Student.avg('age',age__gt = 18)","print(avg_age)'''","","'''","avg_age = Student.avg('age', age__gt=18, age__lt=21)","print(avg_age)'''","","'''","min_age = Student.min('age', age__gt=18)","print(min_age)","","sum_of_age = Student.sum('age', score__gt=30)","print(sum_of_age)'''","","'''","sum_of_age = Student.sum('age', score__gt=30, age__lt=30)","print(sum_of_age)","","","count = Student.count('age', score__gt=30, age__lt=30)","print(count)'''","","","count = Student.count()","print(count)",""],"id":1316}],[{"start":{"row":0,"column":0},"end":{"row":112,"column":4},"action":"insert","lines":["def write_data(sql_query):","    import sqlite3","    connection = sqlite3.connect(\"students.sqlite3\")","    c = connection.cursor() ","    c.execute(\"PRAGMA foreign_keys=on;\") ","    c.execute(sql_query) ","    connection.commit() ","    connection.close()","","def read_data(sql_query):","    import sqlite3","    connection = sqlite3.connect(\"students.sqlite3\")","    c = connection.cursor() ","    c.execute(sql_query) ","    ans= c.fetchall()  ","    connection.close()","    return ans","","","class DoesNotExist(Exception):","    pass","","","class MultipleObjectsReturned(Exception):","    pass","","","class InvalidField(Exception):","    pass","","","class Student:","    def __init__(self, student_id = None ,name = None, age = None , score = None):","        self.student_id = student_id","        self.name = name","        self.age = age","        self.score = score","    ","    @staticmethod    ","    def aggregations(agg = None,field = \"\", **kwargs):","        list = ['student_id','name','age','score','']","        ","        multiple_values = []","            ","        if field not in list:","                raise InvalidField","                ","            ","        for i,j in kwargs.items():","            ","            a = i.split('__')","            ","            if a[0] not in list:","                raise InvalidField","                ","            oper = {'gt':'>', 'lt':'<', 'lte':'<=', 'gte':'>=', 'neq':'<>', 'eq' : '='}","            ","            if len(a) == 1:","                val = \"{} {} '{}' \".format(a[0],oper['eq'],j)","                ","            elif a[1] == 'in':","                j = tuple(j)","                val = \"{} {} {}\".format(a[0],'IN',j)","            ","            elif a[1] == 'contains':","                val = \"{} {} '%{}%' \".format(a[0],'LIKE',j)","                ","            else:","                val = \"{} {} '{}' \".format(a[0],oper[a[1]],j)","                ","            multiple_values.append(val)","            ","        x = ' AND '.join(multiple_values)","        ","        if x == \"\":","            data = read_data(\"SELECT {}({}) FROM Student\".format(agg,field))","        else:","            data = read_data(\"SELECT {}({}) FROM Student where {}\".format(agg,field,x))","            ","        ","        return data[0][0]","        ","    @classmethod","    def avg(cls, field, **kwargs):","                ","        ans = cls.aggregations('AVG', field, **kwargs)","        return ans","        ","    @classmethod","    def min(cls, field, **kwargs):","        ","        ans = cls.aggregations('MIN', field, **kwargs)","        return ans","        ","    @classmethod","    def max(cls, field, **kwargs):","        ","        ans = cls.aggregations('MAX', field, **kwargs)","        return ans","        ","    @classmethod","    def sum(cls, field, **kwargs):","        ","        ans = cls.aggregations('SUM', field, **kwargs)","        return ans","        ","    @classmethod","    def count(cls, field = \"\",**kwargs):","        ","        ans = cls.aggregations('COUNT', field, **kwargs)","        return ans","        ","    "],"id":1317}],[{"start":{"row":73,"column":8},"end":{"row":74,"column":0},"action":"insert","lines":["",""],"id":1318},{"start":{"row":74,"column":0},"end":{"row":74,"column":8},"action":"insert","lines":["        "]},{"start":{"row":74,"column":8},"end":{"row":74,"column":9},"action":"insert","lines":["p"]},{"start":{"row":74,"column":9},"end":{"row":74,"column":10},"action":"insert","lines":["r"]},{"start":{"row":74,"column":10},"end":{"row":74,"column":11},"action":"insert","lines":["i"]},{"start":{"row":74,"column":11},"end":{"row":74,"column":12},"action":"insert","lines":["n"]},{"start":{"row":74,"column":12},"end":{"row":74,"column":13},"action":"insert","lines":["t"]}],[{"start":{"row":74,"column":13},"end":{"row":74,"column":15},"action":"insert","lines":["()"],"id":1319}],[{"start":{"row":74,"column":14},"end":{"row":74,"column":15},"action":"insert","lines":["x"],"id":1320}],[{"start":{"row":74,"column":16},"end":{"row":75,"column":0},"action":"insert","lines":["",""],"id":1321},{"start":{"row":75,"column":0},"end":{"row":75,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":114,"column":1},"end":{"row":114,"column":2},"action":"remove","lines":[" "],"id":1322},{"start":{"row":114,"column":0},"end":{"row":114,"column":1},"action":"remove","lines":[" "]}],[{"start":{"row":114,"column":0},"end":{"row":120,"column":0},"action":"insert","lines":["count = Student.count('age', score__gt=30, age__lt=30)","print(count)'''","","","count = Student.count()","print(count)",""],"id":1323}],[{"start":{"row":114,"column":15},"end":{"row":114,"column":16},"action":"remove","lines":["."],"id":1324}],[{"start":{"row":114,"column":15},"end":{"row":114,"column":16},"action":"insert","lines":["."],"id":1325}],[{"start":{"row":115,"column":13},"end":{"row":115,"column":15},"action":"remove","lines":["''"],"id":1326}],[{"start":{"row":115,"column":13},"end":{"row":116,"column":0},"action":"remove","lines":["",""],"id":1327},{"start":{"row":115,"column":12},"end":{"row":115,"column":13},"action":"remove","lines":["'"]}],[{"start":{"row":112,"column":0},"end":{"row":113,"column":0},"action":"insert","lines":["",""],"id":1328}],[{"start":{"row":114,"column":0},"end":{"row":114,"column":1},"action":"remove","lines":[" "],"id":1329}],[{"start":{"row":114,"column":0},"end":{"row":115,"column":0},"action":"insert","lines":["",""],"id":1330},{"start":{"row":115,"column":0},"end":{"row":116,"column":0},"action":"insert","lines":["",""]},{"start":{"row":116,"column":0},"end":{"row":117,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":117,"column":0},"end":{"row":119,"column":0},"action":"insert","lines":["avg_age = Student.avg('age',age__gt = 18)","print(avg_age)'''",""],"id":1331}],[{"start":{"row":118,"column":16},"end":{"row":118,"column":17},"action":"remove","lines":["'"],"id":1332},{"start":{"row":118,"column":15},"end":{"row":118,"column":16},"action":"remove","lines":["'"]},{"start":{"row":118,"column":14},"end":{"row":118,"column":15},"action":"remove","lines":["'"]}],[{"start":{"row":124,"column":2},"end":{"row":125,"column":0},"action":"insert","lines":["",""],"id":1333}],[{"start":{"row":124,"column":1},"end":{"row":124,"column":2},"action":"remove","lines":["r"],"id":1334},{"start":{"row":124,"column":0},"end":{"row":124,"column":1},"action":"remove","lines":["p"]}],[{"start":{"row":58,"column":61},"end":{"row":59,"column":0},"action":"insert","lines":["",""],"id":1335},{"start":{"row":59,"column":0},"end":{"row":59,"column":16},"action":"insert","lines":["                "]}],[{"start":{"row":59,"column":12},"end":{"row":59,"column":16},"action":"remove","lines":["    "],"id":1336},{"start":{"row":59,"column":8},"end":{"row":59,"column":12},"action":"remove","lines":["    "]},{"start":{"row":59,"column":4},"end":{"row":59,"column":8},"action":"remove","lines":["    "]},{"start":{"row":59,"column":0},"end":{"row":59,"column":4},"action":"remove","lines":["    "]},{"start":{"row":58,"column":61},"end":{"row":59,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":68,"column":61},"end":{"row":69,"column":0},"action":"insert","lines":["",""],"id":1337},{"start":{"row":69,"column":0},"end":{"row":69,"column":16},"action":"insert","lines":["                "]},{"start":{"row":69,"column":16},"end":{"row":69,"column":17},"action":"insert","lines":["p"]},{"start":{"row":69,"column":17},"end":{"row":69,"column":18},"action":"insert","lines":["r"]},{"start":{"row":69,"column":18},"end":{"row":69,"column":19},"action":"insert","lines":["i"]},{"start":{"row":69,"column":19},"end":{"row":69,"column":20},"action":"insert","lines":["n"]},{"start":{"row":69,"column":20},"end":{"row":69,"column":21},"action":"insert","lines":["t"]}],[{"start":{"row":69,"column":21},"end":{"row":69,"column":23},"action":"insert","lines":["()"],"id":1338}],[{"start":{"row":69,"column":22},"end":{"row":69,"column":23},"action":"insert","lines":["v"],"id":1339},{"start":{"row":69,"column":23},"end":{"row":69,"column":24},"action":"insert","lines":["a"]},{"start":{"row":69,"column":24},"end":{"row":69,"column":25},"action":"insert","lines":["l"]}],[{"start":{"row":126,"column":0},"end":{"row":126,"column":1},"action":"insert","lines":["p"],"id":1340},{"start":{"row":126,"column":1},"end":{"row":126,"column":2},"action":"insert","lines":["r"]}],[{"start":{"row":126,"column":2},"end":{"row":127,"column":0},"action":"insert","lines":["",""],"id":1341}],[{"start":{"row":126,"column":2},"end":{"row":127,"column":0},"action":"remove","lines":["",""],"id":1342}]]},"ace":{"folds":[],"scrolltop":790.5141604376782,"scrollleft":0,"selection":{"start":{"row":72,"column":12},"end":{"row":72,"column":12},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":45,"state":"start","mode":"ace/mode/python"}},"timestamp":1590589260409,"hash":"64b4edae5d45b44d27798ae8e8164189f74776a4"}